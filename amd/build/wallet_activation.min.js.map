{"version":3,"file":"wallet_activation.min.js","sources":["../src/wallet_activation.js"],"sourcesContent":["// This file is part of the Paynocchio payments module for Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.\r\n *\r\n * @module     paygw_paynocchio/repository\r\n * @copyright  2024 Paynocchio <ceo@paynocchio.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nimport {handleWalletActivationClick} from \"./repository\";\r\n//import {exception as displayException} from 'core/notification';\r\n//import Templates from 'core/templates';\r\n\r\nexport const init = (user_id) => {\r\n    const paynocchio_activation_button = document.getElementById('paynocchio_activation_button');\r\n\r\n    if(paynocchio_activation_button) {\r\n        const spinner = paynocchio_activation_button.querySelector('.paynocchio-spinner');\r\n        const message = document.querySelector('.topup-description');\r\n        paynocchio_activation_button.addEventListener('click', () => {\r\n            const response = handleWalletActivationClick(user_id);\r\n            spinner.classList.add('active');\r\n            response.then(data => {\r\n                if(data.success) {\r\n                    spinner.classList.remove('active');\r\n                    message.classList.remove('hidden');\r\n                    /*Templates.renderForPromise('paygw_paynocchio/paynocchio_payment_wallet', {\r\n                        wallet_balance: 0,\r\n                        wallet_bonuses: 0,\r\n                    })\r\n                        .then(({html, js}) => {\r\n                            Templates.replaceNodeContents('.paynocchio-wallet-wrapper', html, js);\r\n                        })\r\n                        .catch((error) => displayException(error));*/\r\n                    //window.location.reload();\r\n                    document.getElementById('congratz').classList.add('shown');\r\n                    if (document.getElementById('page-payment-gateway-paynocchio-pay')) {\r\n                        document.getElementById('page-payment-gateway-paynocchio-pay').style.overflow = 'hidden';\r\n                    }\r\n                    if (document.getElementById('page-payment-gateway-paynocchio-my_paynocchio_wallet')) {\r\n                        document.getElementById('page-payment-gateway-paynocchio-my_paynocchio_wallet').style.overflow = 'hidden';\r\n                    }\r\n                } else {\r\n                    window.alert('There is an Error occurred. Please try again later.');\r\n                    window.console.log(data);\r\n                }\r\n            });\r\n        });\r\n    }\r\n};\r\n"],"names":["_exports","init","user_id","paynocchio_activation_button","document","getElementById","spinner","querySelector","message","addEventListener","response","handleWalletActivationClick","classList","add","then","data","success","remove","style","overflow","window","alert","console","log"],"mappings":"oLA+DEA,SAAAC,KApCmBC,UACjB,MAAMC,6BAA+BC,SAASC,eAAe,gCAE7D,GAAGF,6BAA8B,CAC7B,MAAMG,QAAUH,6BAA6BI,cAAc,uBACrDC,QAAUJ,SAASG,cAAc,sBACvCJ,6BAA6BM,iBAAiB,SAAS,KACnD,MAAMC,UAAW,EAAAC,yCAA4BT,SAC7CI,QAAQM,UAAUC,IAAI,UACtBH,SAASI,MAAKC,OACPA,KAAKC,SACJV,QAAQM,UAAUK,OAAO,UACzBT,QAAQI,UAAUK,OAAO,UAUzBb,SAASC,eAAe,YAAYO,UAAUC,IAAI,SAC9CT,SAASC,eAAe,yCACxBD,SAASC,eAAe,uCAAuCa,MAAMC,SAAW,UAEhFf,SAASC,eAAe,0DACxBD,SAASC,eAAe,wDAAwDa,MAAMC,SAAW,YAGrGC,OAAOC,MAAM,uDACbD,OAAOE,QAAQC,IAAIR,SAEzB,KAGZ"}