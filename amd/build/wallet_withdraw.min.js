define("paygw_paynocchio/wallet_withdraw",["exports","./repository"],(function(_exports,_repository){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;
/**
   * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.
   *
   * @module     paygw_paynocchio/repository
   * @copyright  2024 Paynocchio <ceo@paynocchio.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */
const checkAvailability=(inputVal,balance)=>!(""===inputVal||0===parseFloat(inputVal)||parseFloat(inputVal)>parseFloat(balance));_exports.init=balance=>{const paynocchio_wallet_withdraw_button=document.getElementById("paynocchio_withdraw_button");paynocchio_wallet_withdraw_button&&paynocchio_wallet_withdraw_button.addEventListener("click",(()=>{(0,_repository.showModalWithWithdraw)().then((modal=>{modal.setTitle("Withdraw from the Wallet");const input=modal.body.find("#withdraw_amount"),button=modal.body.find("#withdraw_button");checkAvailability(input.val(),balance)||button.addClass("disabled"),input.keyup((evt=>{checkAvailability(evt.target.value,balance)?button.removeClass("disabled"):button.addClass("disabled")})),button.click((()=>{checkAvailability(input.val(),balance)?(button.addClass("disabled"),modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Working..."),(0,_repository.handleWithdrawClick)(input.val()).then((data=>{var value;data.success?(modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Success! Reloading..."),value=data.balance,document.querySelector(".paynocchio-balance-value").innerText=value,function(value){document.querySelector(".paynocchio-bonus-value").innerText=value}(data.bonuses),window.location.reload()):(modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Something wrong. Please reload page and try again... "+data.wallet_status),button.toggleClass("disabled"))}))):modal.body.find("#withdraw_message").text("Yeah... right... ;)")}))}))}))}}));

//# sourceMappingURL=wallet_withdraw.min.js.map