define("paygw_paynocchio/wallet_withdraw",["exports","./repository","core/notification","core/templates"],(function(_exports,_repository,_notification,_templates){var obj;
/**
   * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.
   *
   * @module     paygw_paynocchio/repository
   * @copyright  2024 Paynocchio <ceo@paynocchio.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};_exports.init=()=>{const paynocchio_wallet_withdraw_button=document.getElementById("paynocchio_withdraw_button");paynocchio_wallet_withdraw_button&&paynocchio_wallet_withdraw_button.addEventListener("click",(()=>{(0,_repository.showModalWithWithdraw)().then((modal=>{modal.setTitle("Withdraw from Wallet");const input=document.getElementById("withdraw_amount"),button=document.getElementById("withdraw_button");button.addEventListener("click",(()=>{input.value&&(button.classList.add("disabled"),modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Working..."),(0,_repository.handleWithdrawClick)(input.value).then((data=>{var value;data.success?(modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Success! Reloading..."),value=data.balance,document.querySelector(".paynocchio-balance-value").innerText=value,function(value){document.querySelector(".paynocchio-bonus-value").innerText=value}(data.bonuses),window.location.reload(),_templates.default.renderForPromise("paygw_paynocchio/wallet_transactions",{transactions:JSON.parse(data.transactions),hastransactions:data.hastransactions}).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.replaceNodeContents(".paynocchio-transactions",html,js)})).catch((error=>(0,_notification.exception)(error))),_templates.default.renderForPromise("paygw_paynocchio/paynocchio_wallet_actions_buttons",{wallet_balance:data.balance,wallet_bonuses:data.bonuses}).then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.replaceNodeContents("#paynocchio_wallet_actions_buttons",html,js)})).catch((error=>(0,_notification.exception)(error)))):(modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#withdraw_message").text("Something wrong. Please reload page and try again..."))})))}))}))}))}}));

//# sourceMappingURL=wallet_withdraw.min.js.map