define("paygw_paynocchio/wallet_topup",["exports","./repository","core/notification","core/templates"],(function(_exports,_repository,_notification,_templates){var obj;
/**
   * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.
   *
   * @module     paygw_paynocchio/repository
   * @copyright  2024 Paynocchio <ceo@paynocchio.com>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};_exports.init=pay=>{const paynocchio_wallet_topup_button=document.getElementById("paynocchio_topup_button");paynocchio_wallet_topup_button&&paynocchio_wallet_topup_button.addEventListener("click",(()=>{(0,_repository.showModalWithTopup)().then((modal=>{modal.setTitle("Topup Paynocchio Wallet");const input=modal.body.find("#top_up_amount"),button=modal.body.find("#topup_button");button.click((()=>{input.val()&&(button.addClass("disabled"),modal.body.find(".paynocchio-spinner").toggleClass("active"),(0,_repository.handleTopUpClick)(input.val()).then((data=>{var value;data.success&&(pay?window.location.reload():(modal.body.find(".paynocchio-spinner").toggleClass("active"),modal.body.find("#topup_message").text("Success!"),value=data.balance,document.querySelector(".paynocchio-balance-value").innerText=value,function(value){document.querySelector(".paynocchio-bonus-value").innerText=value}(data.bonuses),setTimeout((()=>{modal.hide(),modal.destroy(),_templates.default.renderForPromise("paygw_paynocchio/wallet_transactions",{transactions:JSON.parse(data.transactions),hastransactions:data.hastransactions}).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.replaceNodeContents(".paynocchio-transactions",html,js)})).catch((error=>(0,_notification.exception)(error)))}),1e3)))})))}))}))}))}}));

//# sourceMappingURL=wallet_topup.min.js.map