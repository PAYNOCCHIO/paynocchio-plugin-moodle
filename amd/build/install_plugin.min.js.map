{"version":3,"file":"install_plugin.min.js","sources":["../src/install_plugin.js"],"sourcesContent":["// This file is part of the Paynocchio payments module for Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.\n *\n * @module     paygw_paynocchio/repository\n * @copyright  2024 Paynocchio <ceo@paynocchio.com>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nconst env_input = document.getElementById('id_s_paygw_paynocchio_environmentuuid');\nconst secret_input = document.getElementById('id_s_paygw_paynocchio_paynocchiosecret');\nconst integration = document.getElementById('admin-paynocchiointegrated');\nconst surcharge = document.getElementById('admin-surcharge');\nsurcharge.remove();\nintegration.remove();\n\nexport const init = () => {\n    checkButtonVisibility(env_input.value, secret_input.value);\n\n    env_input.addEventListener('keyup', (evt) => checkButtonVisibility(evt.target.value, secret_input.value));\n    secret_input.addEventListener('keyup', (evt) => checkButtonVisibility(env_input.value, evt.target.value));\n};\n\n/**\n * Functoin to check if Env and secret are inputed\n * @param {string} env\n * @param {string} secret\n */\nfunction checkButtonVisibility(env, secret) {\n    const submit_button = document.querySelector('.settingsform button[type=\"submit\"]');\n\n    if(env.trim() === '' || secret.trim() === '') {\n        submit_button.classList.add('disabled');\n        removeErrorMessage();\n        addMessage(submit_button);\n    } else {\n        submit_button.classList.remove('disabled');\n        removeErrorMessage();\n    }\n\n    if(env.trim() === '') {\n        env_input.classList.add('is-invalid');\n    }else {\n        if(env_input.classList.contains('is-invalid')) {\n            env_input.classList.remove('is-invalid');\n        }\n    }\n\n    if(secret.trim() === '') {\n        secret_input.classList.add('is-invalid');\n    } else {\n        if(secret_input.classList.contains('is-invalid')) {\n            secret_input.classList.remove('is-invalid');\n        }\n    }\n}\n\n/**\n * Adds error message\n * @param {Element} element\n */\nfunction addMessage(element) {\n    const p = document.createElement('p');\n    p.id = 'submit_error';\n    p.innerText = 'Please enter Environment ID and Secret key';\n    element.after(p);\n}\n\n/**\n * Removes error message\n */\nfunction removeErrorMessage(){\n    const p = document.getElementById('submit_error');\n    if(p) {\n        p.remove();\n    }\n}"],"names":["env_input","document","getElementById","secret_input","integration","remove","checkButtonVisibility","env","secret","submit_button","querySelector","trim","classList","add","removeErrorMessage","element","p","createElement","id","innerText","after","addMessage","contains","value","addEventListener","evt","target"],"mappings":";;;;;;;;MAuBMA,UAAYC,SAASC,eAAe,yCACpCC,aAAeF,SAASC,eAAe,0CACvCE,YAAcH,SAASC,eAAe,8BAC1BD,SAASC,eAAe,mBAChCG,SACVD,YAAYC,kBAcHC,sBAAsBC,IAAKC,cAC1BC,cAAgBR,SAASS,cAAc,uCAE3B,KAAfH,IAAII,QAAmC,KAAlBH,OAAOG,QAC3BF,cAAcG,UAAUC,IAAI,YAC5BC,8BA4BYC,eACVC,EAAIf,SAASgB,cAAc,KACjCD,EAAEE,GAAK,eACPF,EAAEG,UAAY,6CACdJ,QAAQK,MAAMJ,GA/BVK,CAAWZ,iBAEXA,cAAcG,UAAUP,OAAO,YAC/BS,sBAGc,KAAfP,IAAII,OACHX,UAAUY,UAAUC,IAAI,cAErBb,UAAUY,UAAUU,SAAS,eAC5BtB,UAAUY,UAAUP,OAAO,cAId,KAAlBG,OAAOG,OACNR,aAAaS,UAAUC,IAAI,cAExBV,aAAaS,UAAUU,SAAS,eAC/BnB,aAAaS,UAAUP,OAAO,uBAmBjCS,2BACCE,EAAIf,SAASC,eAAe,gBAC/Bc,GACCA,EAAEX,uBA1DU,KAChBC,sBAAsBN,UAAUuB,MAAOpB,aAAaoB,OAEpDvB,UAAUwB,iBAAiB,SAAUC,KAAQnB,sBAAsBmB,IAAIC,OAAOH,MAAOpB,aAAaoB,SAClGpB,aAAaqB,iBAAiB,SAAUC,KAAQnB,sBAAsBN,UAAUuB,MAAOE,IAAIC,OAAOH"}