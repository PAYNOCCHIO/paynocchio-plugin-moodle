{"version":3,"file":"install_plugin.min.js","sources":["../src/install_plugin.js"],"sourcesContent":["// This file is part of the Paynocchio payments module for Moodle - http://moodle.org/\r\n//\r\n// Moodle is free software: you can redistribute it and/or modify\r\n// it under the terms of the GNU General Public License as published by\r\n// the Free Software Foundation, either version 3 of the License, or\r\n// (at your option) any later version.\r\n//\r\n// Moodle is distributed in the hope that it will be useful,\r\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\r\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\r\n// GNU General Public License for more details.\r\n//\r\n// You should have received a copy of the GNU General Public License\r\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\r\n\r\n/**\r\n * Paynocchio repository module to encapsulate all of the AJAX requests that can be sent for bank.\r\n *\r\n * @module     paygw_paynocchio/repository\r\n * @copyright  2024 Paynocchio <ceo@paynocchio.com>\r\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\r\n */\r\n\r\nconst env_input = document.getElementById('id_s_paygw_paynocchio_environmentuuid');\r\nconst secret_input = document.getElementById('id_s_paygw_paynocchio_paynocchiosecret');\r\n\r\nexport const init = () => {\r\n    checkButtonVisibility(env_input.value, secret_input.value);\r\n\r\n    env_input.addEventListener('keyup', (evt) => checkButtonVisibility(evt.target.value, secret_input.value));\r\n    secret_input.addEventListener('keyup', (evt) => checkButtonVisibility(env_input.value, evt.target.value));\r\n};\r\n\r\n/**\r\n * Functoin to check if Env and secret are inputed\r\n * @param {string} env\r\n * @param {string} secret\r\n */\r\nfunction checkButtonVisibility(env, secret) {\r\n    let submit_button = document.querySelector('.settingsform button[type=\"submit\"]');\r\n\r\n    if(document.querySelector('#adminsettings input[type=\"submit\"]')) {\r\n        submit_button = document.querySelector('#adminsettings input[type=\"submit\"]');\r\n    }\r\n\r\n\r\n    if(env.trim() === '' || secret.trim() === '') {\r\n        submit_button.classList.add('disabled');\r\n        removeErrorMessage();\r\n        addMessage(submit_button);\r\n    } else {\r\n        submit_button.classList.remove('disabled');\r\n        removeErrorMessage();\r\n    }\r\n\r\n    if(env.trim() === '') {\r\n        env_input.classList.add('is-invalid');\r\n    }else {\r\n        if(env_input.classList.contains('is-invalid')) {\r\n            env_input.classList.remove('is-invalid');\r\n        }\r\n    }\r\n\r\n    if(secret.trim() === '') {\r\n        secret_input.classList.add('is-invalid');\r\n    } else {\r\n        if(secret_input.classList.contains('is-invalid')) {\r\n            secret_input.classList.remove('is-invalid');\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Adds error message\r\n * @param {Element} element\r\n */\r\nfunction addMessage(element) {\r\n    const p = document.createElement('p');\r\n    p.id = 'submit_error';\r\n    p.innerText = 'Please enter Environment ID and Secret key';\r\n    element.after(p);\r\n}\r\n\r\n/**\r\n * Removes error message\r\n */\r\nfunction removeErrorMessage(){\r\n    const p = document.getElementById('submit_error');\r\n    if(p) {\r\n        p.remove();\r\n    }\r\n}"],"names":["env_input","document","getElementById","secret_input","checkButtonVisibility","env","secret","submit_button","querySelector","trim","classList","add","removeErrorMessage","element","p","createElement","id","innerText","after","addMessage","remove","contains","_exports","init","value","addEventListener","evt","target"],"mappings":";;;;;;;;AAuBA,MAAMA,UAAYC,SAASC,eAAe,yCACpCC,aAAeF,SAASC,eAAe,0CAc7C,SAASE,sBAAsBC,IAAKC,QAChC,IAAIC,cAAgBN,SAASO,cAAc,uCAExCP,SAASO,cAAc,yCACtBD,cAAgBN,SAASO,cAAc,wCAIzB,KAAfH,IAAII,QAAmC,KAAlBH,OAAOG,QAC3BF,cAAcG,UAAUC,IAAI,YAC5BC,qBA4BR,SAAoBC,SAChB,MAAMC,EAAIb,SAASc,cAAc,KACjCD,EAAEE,GAAK,eACPF,EAAEG,UAAY,6CACdJ,QAAQK,MAAMJ,GA/BVK,CAAWZ,iBAEXA,cAAcG,UAAUU,OAAO,YAC/BR,sBAGc,KAAfP,IAAII,OACHT,UAAUU,UAAUC,IAAI,cAErBX,UAAUU,UAAUW,SAAS,eAC5BrB,UAAUU,UAAUU,OAAO,cAId,KAAlBd,OAAOG,OACNN,aAAaO,UAAUC,IAAI,cAExBR,aAAaO,UAAUW,SAAS,eAC/BlB,aAAaO,UAAUU,OAAO,cAmB1C,SAASR,qBACL,MAAME,EAAIb,SAASC,eAAe,gBAC/BY,GACCA,EAAEM,SA1DRE,SAAAC,KALkBA,KAChBnB,sBAAsBJ,UAAUwB,MAAOrB,aAAaqB,OAEpDxB,UAAUyB,iBAAiB,SAAUC,KAAQtB,sBAAsBsB,IAAIC,OAAOH,MAAOrB,aAAaqB,SAClGrB,aAAasB,iBAAiB,SAAUC,KAAQtB,sBAAsBJ,UAAUwB,MAAOE,IAAIC,OAAOH,QAAO,CA6D5G"}